@page "{Id:int:min(1)}"
@using App.UI.Configurations
@using Microsoft.AspNetCore.Identity
@using SharedTenant.Domain

@inject SignInManager<ApplicationUser> SignInManager
@inject UserManager<ApplicationUser> UserManager
@model App.UI.Pages.customer.book_detailsModel
@{
    ViewBag.Title = Model.BookDetails.Name + " Book Details";
    Layout = "/Pages/Shared/CustomerLayout.cshtml";
}
<link rel="stylesheet" href="/css/CustomerCssFiles/cbookdesc.css">
<input type="hidden" value="@Model.BookDetails.Id" id='bookId'>
<section class="bookdesc">

    <div class="container ">
        <div class="row">

            <div class=" col-md-4 coverbook">
                <img src="@Model.BookDetails.PhotoPath" alt="">
            </div>


            <div class=" col-md-8 content">

                <h1 class="bookname"> @Model.BookDetails.Name </h1>



                @if (Model.BookDetails.Price.ToString().Equals(Model.BookDetails.BookPriceAfterDiscount))
                {<div class="price">$@Model.BookDetails.Price</div>
            }
            else
            { <div class="price">$@Model.BookDetails.BookPriceAfterDiscount <span>$@Model.BookDetails.Price</span></div>}


                <div class="stars">
                    <span class="rate"> Rate of book : </span>
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star-half-alt"></i>
                </div>



                <div class="about">

                    <h2> About book </h2>
                    <p class="description">
                        @Model.BookDetails.Description
                    </p>

                </div>



            </div>


        </div>

        <div class="butns">
            <a href="#" class="btnt cart-btn" id="btn">add to cart</a>
            <a href="#" class="btnt">Read Sample</a>
            <a href="#" class="icon"><i class="fa-regular fa-heart-circle-plus"></i>   Add to watchlist</a>







        </div>






    </div>

</section>

<section class="aboutauthor">

    <div class="about">
        <h1 class="heading"> <span>About Author</span> </h1>
    </div>

    <div class="cont">
        <a class="card" href="/@Global.UrlName/author-details/@Model.BookDetails.AuthorId">
            <div class="row">
                <div class="icon-container">
                    <div class="loading-icon">
                        <img src="@Model.BookDetails.AuthorPhotoPath" alt="">
                    </div>
                </div>
                <div class="description">
                    <div class="name">@Model.BookDetails.AuthorName</div>

                </div>
            </div>

        </a>
    </div>

</section>

<!-- Recommended section starts  -->
<section class="Trend" id="Trend">

    <h1 class="heading"> <span>Recommended For You</span> </h1>

    <div class="swiper Trend-slider">
        @if (SignInManager.IsSignedIn(User))
        {<div class="swiper-wrapper">
                @foreach (var book in Model.recomendedBooks)
                {
                    <div class="swiper-slide box">
                        <div class="icons">
                            <a href="/customer/exchange-book-details/@book.BookId" class="fas fa-search"></a>

                        </div>
                        <div class="image">
                            <img src="/photos/books/@book.Book.Photo" alt="">
                        </div>
                        <div class="content">
                            <h3>@book.Book.Name</h3>
                            <a href="#" class="btnt">add to cart</a>
                        </div>
                    </div>
                }








            </div>



<div class="swiper-button-next"></div>


<div class="swiper-button-prev"></div>
        }
        else { 
    <center>
        <h1 style="font-size: xxx-large; color: #114766">No Recommended Books For You</h1>
        <h2>Please login to get recommended books</h2>
        <a href="/account/login" class="btnt">Login</a>

    </center>
        }

    </div>

</section>


<!-- similar section starts  -->
<section class="Trend" id="Trend">

    <h1 class="heading"> <span>Most Selling Books</span> </h1>

    <div class="swiper Trend-slider">

        <div class="swiper-wrapper">
            @foreach (var Book in Model.MostSellingBooks)
            {
                <div class="swiper-slide box">
                    <div class="icons">
                        <a href="/@Global.UrlName/book-details/@Book.Id" class="fas fa-search"></a>

                    </div>
                    <div class="image">
                        <img src="@Book.PhotoPath" alt="">
                    </div>
                    <div class="content">
                        <h3>@Book.Name</h3>
                        @if (Book.Price.ToString("####").Equals(Book.BookPriceAfterDiscount))
                        {<div class="price">$@Book.Price</div>
                        }
                        else
                        { <div class="price">$@Book.BookPriceAfterDiscount <span>$@Book.Price</span></div>}
                        <a href="#" class="btnt">add to cart</a>
                    </div>
                </div>
            }





        </div>

        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>

    </div>

</section>


<!-- similar section ends -->



<script>
    $(function () {
        $("#btn").click(function () {
            var Id = $('#bookId').val();
            $.ajax({

                url: '?handler=AddToCart',
                data: { Id: Id },


            });
        });
    });
</script>
<!-- Trend section ends -->
